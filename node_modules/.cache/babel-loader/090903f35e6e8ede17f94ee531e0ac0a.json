{"ast":null,"code":"\"use strict\";\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar assign = require('object-assign');\n\nvar validators = require('../validators');\n\nvar Patch = require('./patch');\n\nvar defaultMutateOptions = {\n  returnDocuments: false\n};\n\nfunction Transaction() {\n  var operations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var client = arguments.length > 1 ? arguments[1] : undefined;\n  var transactionId = arguments.length > 2 ? arguments[2] : undefined;\n  this.trxId = transactionId;\n  this.operations = operations;\n  this.client = client;\n}\n\nassign(Transaction.prototype, {\n  clone: function clone() {\n    return new Transaction(this.operations.slice(0), this.client, this.trxId);\n  },\n  create: function create(doc) {\n    validators.validateObject('create', doc);\n    return this._add({\n      create: doc\n    });\n  },\n  createIfNotExists: function createIfNotExists(doc) {\n    var op = 'createIfNotExists';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  createOrReplace: function createOrReplace(doc) {\n    var op = 'createOrReplace';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  delete: function _delete(documentId) {\n    validators.validateDocumentId('delete', documentId);\n    return this._add({\n      delete: {\n        id: documentId\n      }\n    });\n  },\n  patch: function patch(documentId, patchOps) {\n    var isBuilder = typeof patchOps === 'function';\n    var isPatch = documentId instanceof Patch; // transaction.patch(client.patch('documentId').inc({visits: 1}))\n\n    if (isPatch) {\n      return this._add({\n        patch: documentId.serialize()\n      });\n    } // patch => patch.inc({visits: 1}).set({foo: 'bar'})\n\n\n    if (isBuilder) {\n      var patch = patchOps(new Patch(documentId, {}, this.client));\n\n      if (!(patch instanceof Patch)) {\n        throw new Error('function passed to `patch()` must return the patch');\n      }\n\n      return this._add({\n        patch: patch.serialize()\n      });\n    }\n\n    return this._add({\n      patch: assign({\n        id: documentId\n      }, patchOps)\n    });\n  },\n  transactionId: function transactionId(id) {\n    if (!id) {\n      return this.trxId;\n    }\n\n    this.trxId = id;\n    return this;\n  },\n  serialize: function serialize() {\n    return this.operations.slice();\n  },\n  toJSON: function toJSON() {\n    return this.serialize();\n  },\n  commit: function commit(options) {\n    if (!this.client) {\n      throw new Error('No `client` passed to transaction, either provide one or pass the ' + 'transaction to a clients `mutate()` method');\n    }\n\n    return this.client.mutate(this.serialize(), assign({\n      transactionId: this.trxId\n    }, defaultMutateOptions, options || {}));\n  },\n  reset: function reset() {\n    this.operations = [];\n    return this;\n  },\n  _add: function _add(mut) {\n    this.operations.push(mut);\n    return this;\n  }\n});\nmodule.exports = Transaction;","map":{"version":3,"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","assign","require","validators","Patch","defaultMutateOptions","returnDocuments","Transaction","operations","arguments","length","undefined","client","transactionId","trxId","prototype","clone","slice","create","doc","validateObject","_add","createIfNotExists","op","requireDocumentId","createOrReplace","delete","_delete","documentId","validateDocumentId","id","patch","patchOps","isBuilder","isPatch","serialize","Error","toJSON","commit","options","mutate","reset","mut","push","module","exports"],"sources":["/home/sony/Data/FE/company-profile/node_modules/@sanity/client/lib/data/transaction.js"],"sourcesContent":["\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar validators = require('../validators');\n\nvar Patch = require('./patch');\n\nvar defaultMutateOptions = {\n  returnDocuments: false\n};\n\nfunction Transaction() {\n  var operations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var client = arguments.length > 1 ? arguments[1] : undefined;\n  var transactionId = arguments.length > 2 ? arguments[2] : undefined;\n  this.trxId = transactionId;\n  this.operations = operations;\n  this.client = client;\n}\n\nassign(Transaction.prototype, {\n  clone: function clone() {\n    return new Transaction(this.operations.slice(0), this.client, this.trxId);\n  },\n  create: function create(doc) {\n    validators.validateObject('create', doc);\n    return this._add({\n      create: doc\n    });\n  },\n  createIfNotExists: function createIfNotExists(doc) {\n    var op = 'createIfNotExists';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  createOrReplace: function createOrReplace(doc) {\n    var op = 'createOrReplace';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  delete: function _delete(documentId) {\n    validators.validateDocumentId('delete', documentId);\n    return this._add({\n      delete: {\n        id: documentId\n      }\n    });\n  },\n  patch: function patch(documentId, patchOps) {\n    var isBuilder = typeof patchOps === 'function';\n    var isPatch = documentId instanceof Patch; // transaction.patch(client.patch('documentId').inc({visits: 1}))\n\n    if (isPatch) {\n      return this._add({\n        patch: documentId.serialize()\n      });\n    } // patch => patch.inc({visits: 1}).set({foo: 'bar'})\n\n\n    if (isBuilder) {\n      var patch = patchOps(new Patch(documentId, {}, this.client));\n\n      if (!(patch instanceof Patch)) {\n        throw new Error('function passed to `patch()` must return the patch');\n      }\n\n      return this._add({\n        patch: patch.serialize()\n      });\n    }\n\n    return this._add({\n      patch: assign({\n        id: documentId\n      }, patchOps)\n    });\n  },\n  transactionId: function transactionId(id) {\n    if (!id) {\n      return this.trxId;\n    }\n\n    this.trxId = id;\n    return this;\n  },\n  serialize: function serialize() {\n    return this.operations.slice();\n  },\n  toJSON: function toJSON() {\n    return this.serialize();\n  },\n  commit: function commit(options) {\n    if (!this.client) {\n      throw new Error('No `client` passed to transaction, either provide one or pass the ' + 'transaction to a clients `mutate()` method');\n    }\n\n    return this.client.mutate(this.serialize(), assign({\n      transactionId: this.trxId\n    }, defaultMutateOptions, options || {}));\n  },\n  reset: function reset() {\n    this.operations = [];\n    return this;\n  },\n  _add: function _add(mut) {\n    this.operations.push(mut);\n    return this;\n  }\n});\nmodule.exports = Transaction;"],"mappings":"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"},"metadata":{},"sourceType":"script"}